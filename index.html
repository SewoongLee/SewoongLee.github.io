<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <link rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="styles/newspaper.css">
    <title>My Title</title>
    <meta name="viewport" content="width=device-width">

</head>

<body>
    <div class="head">
        <div class="subhead">Friday July 29, 2022</div>
        <div class="collumns">

            <div class="collumn">
                <div class="head"><span class="headline hl1"><br>How many martinis have appeared in 007 history?</span>
                    <p><span class="headline hl2">Visualization of Statistics <br>in the James Bond Movie Series</span>
                    </p>
                </div>
                Dry martini, or vodka martini has been symbolic drink of James Bond movies, also known as 007. In most
                of 007 movies, James Bond ordered the martini in his own way.</p>

                <figure class="figure">
                    <img class="media" src="giphy.gif" alt="">
                    <figcaption class="figcaption">"Dry martini. Wait, 3 measures of gordons, 1 of vodka, half a measure
                        of kina lillet, shake it over ice. Then add a thin slice of lemon peel."
                    </figcaption>
                </figure>

                <p>그렇다면 과연 모든 영화에서 마티니가 등장할까? 007 영화는 긴 역사를 갖고 있는 만큼 긴 시간동안 축적된 각 영화의 특색과 데이터가 있다.</p>

                <span class="citation">
                    "Martini. <br>
                    Shaken, not stirred."
                </span>

                <p>우선 마티니에 대한 데이터를 보면... 그리고 마티니 뿐 아니라 여러가지 통계를 조회할 수 있다. Coincidently, this visual article follows martini glass structure.</p>




            </div>
        </div>
    </div>
    <div id="martini_graph" style="text-align:center;"></div>
</body>

<script>
    console.log("Hello!")

    // set the dimensions and margins of the graph
    var margin = { top: 30, right: 30, bottom: 160, left: 60 },
        width = 700 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#martini_graph")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

    // Parse the Data
    d3.csv("https://raw.githubusercontent.com/SewoongLee/SewoongLee.github.io/v0.0.4/jamesbond.csv", function (data) {

        function dataX(d) {
            return d.Movie + " (" + d.Year + ")"
        }

        function dataY(d) {
            return d.Martinis
        }

        // X axis
        var xScale = d3.scaleBand()
            .range([0, width])
            .domain(data.map(function (d) { return dataX(d); }))
            .padding(0.2);
        svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(xScale))
            .selectAll("text")
            .attr("transform", "translate(-10,0)rotate(-45)")
            .style("text-anchor", "end");

        console.log(data)
        // console.log(d3.max(dataY(data)))

        // Add Y axis
        var yScale = d3.scaleLinear()
            .domain([0, 10])
            .range([height, 0]);
        svg.append("g")
            .call(d3.axisLeft(yScale));

        // Bars
        svg.selectAll("mybar")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function (d) { return xScale(dataX(d)); })
            .attr("y", function (d) { return yScale(dataY(d)); })
            .attr("width", xScale.bandwidth())
            .attr("height", function (d) { return height - yScale(dataY(d)); })
            .attr("fill", "#69b3a2")
            .on("mouseover", onMouseOver)
            .on("mouseout", onMouseOut)

        svg.append("g").attr("class", "val");
        svg.select(".val")
            .selectAll("text")
            .data(data)
            .enter()
            .append("text")
            .attr("x", function (d, i) {
                return xScale(dataX(d)) + xScale.bandwidth() / 2;
            })
            .attr("y", (d) => yScale(dataY(d))-3)
            .text((d) => dataY(d))
            .attr("font-family", "sans-serif")
            .attr("font-size", "12px")
            .attr("fill", "black")
            .attr("text-anchor", "middle")
            .attr("display", "none");

    })

    function onMouseOut(d, i) {
        d3.select(this)
            .transition()
            .duration(400)
            .style("fill", "#69b3a2");
        d3.select('.val')
            .selectAll("text").filter((d, index) => index === i)
            .attr("display", "none");
    }

    function onMouseOver(d, i) {
        d3.select(this)
            .transition()
            .duration(400)
            .style("fill", "orange");
        d3.select('.val')
            .selectAll("text").filter((d, index) => index === i)
            .attr("display", "block");
    }
</script>

</html>