<!DOCTYPE html>
<html>

<head>
    <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
    <link
        rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="styles/newspaper.css">
    <title>My Title</title>
    <meta name="viewport" content="width=device-width">

</head>

<body>
    <div class="head">
        <div class="subhead">Friday July 29, 2022</div>
        <div class="collumns">
            
            <div class="collumn">
                <div class="head"><span class="headline hl1">How many martinis have appeared in 007 history?</span>
                    <p><span class="headline hl2">Visualization of Statistics in the James Bond Movie Series So Far</span></p>
                </div>
                Dry martini, or vodka martini has been symbolic drink of James Bond movies, also known as 007. In most of 007 movies, James Bond ordered the martini in his own way.</p>
                
                <figure class="figure">
                    <img class="media"
                        src="giphy.gif"
                        alt="">
                    <figcaption class="figcaption">"Dry martini. Wait, 3 measures of gordons, 1 of vodka, half a measure of kina lillet, shake it over ice. Then add a thin slice of lemon peel."
                    </figcaption>
                </figure>

                <p>그렇다면 과연 모든 영화에서 마티니가 등장할까? 007 영화는 긴 역사를 갖고 있는 만큼 긴 시간동안 축적된 각 영화의 특색과 데이터가 있다.</p>

                <span class="citation">
                    "Martini. <br>
                    Shaken, not stirred."
                </span>

                <p>우선 마티니에 대한 데이터를 보면... Coincidently, this visual article also follows martini glass structure.</p>




            </div>
        </div>
    </div>
</body>

<script>
    const svgWidth = 300, svgHeight = 300;
    const data = [420, 80, 130, 210, 510, 80];

    const svg = d3.select("body")
    .append("svg")
    .attr("width", svgWidth)
    .attr("height", svgHeight)
    .style("border","1px solid rgba(0,0,0,0.1)");

    const padding = 30;

    // xAxis
    const xAxisScale = d3.scaleBand()
    .domain(data.map((d,i) => i)) // 실제값의 범위
    .range([padding, svgWidth - padding]) // 변환할 값의 범위
    .padding(0.1);
    const xAxis = d3.axisBottom().scale(xAxisScale);

    // yAxis
    const yAxisScale = d3.scaleLinear()
    .domain([0, d3.max(data)]) // 실제값의 범위
    .range([svgHeight - padding, padding]); // 변환할 값의 범위(역으로 처리)
    const yAxis = d3.axisLeft().scale(yAxisScale);

    const xAxisTranslate = svgWidth - padding;
    svg.append("g").attr("class", "x-axis").call(xAxis).attr("transform", `translate(0, ${xAxisTranslate})`);
    svg.append("g").attr("class", "y-axis").call(yAxis).attr("transform", `translate(${padding}, 0)`);
    svg.append("g").attr("class", "val");

    // data
    const rectWidth = 40;
    svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
    .attr("height", d => svgHeight - yAxisScale(d) - padding)
    .attr("width", xAxisScale.bandwidth())
    .attr("x", (d,i) => xAxisScale(i))
    .attr("y", d => yAxisScale(d))
    .attr("fill", "orange")
    .on("mouseover", onMouseOver)
    .on("mouseout", onMouseOut)

    svg.select(".val")
    .selectAll("text")
    .data(data)
    .enter()
    .append("text")
    .attr("x", (d,i) => xAxisScale(i) + (xAxisScale.bandwidth() / 2))
    .attr('y', d => yAxisScale(d))
    .text(d => d)
    .attr("font-family", "sans-serif")
    .attr("font-size", "11px")
    .attr("fill", "black")
    .attr("text-anchor", "middle")
    .attr("display", "none");

    function onMouseOut(d,i){
        d3.select(this)
        .transition()
        .duration(400)
        .style("fill", "orange");
        d3.select('.val')
        .selectAll("text").filter((d,index) => index === i)
        .attr("display", "none");
    }

    function onMouseOver(d,i){
        d3.select(this)
        .transition()
        .duration(400)
        .style("fill", "red");
        d3.select('.val')
        .selectAll("text").filter((d,index) => index === i)
        .attr("display", "block");
    }
</script>

</html>